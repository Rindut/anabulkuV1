import{u as I,a as F,r as i,t as u,j as e,M as j,P as M,I as c,S as v,b,c as y,d as S,e as P,f as d,B as N}from"./index-B2bpzhXi.js";import{u as T,P as V}from"./usePets-2Ll4vto1.js";const B=()=>{var f;const{id:n}=I(),o=F(),{getPet:C,updatePet:E}=T(),[w,m]=i.useState(!0),[h,x]=i.useState(!1),[t,p]=i.useState({name:"",pet_type:"cat",gender:"male",age:0,breed:"",vaccination:"",active:!0});i.useEffect(()=>{n&&k(n)},[n]);const k=async a=>{m(!0);const s=await C(a);s?p(s):(u({title:"Error",description:"Pet not found",variant:"destructive"}),o("/pets")),m(!1)},l=a=>{const{name:s,value:r}=a.target;p(_=>({..._,[s]:s==="age"?parseInt(r)||0:r}))},g=(a,s)=>{p(r=>({...r,[a]:s}))},D=async a=>{if(a.preventDefault(),!!n)try{if(x(!0),!t.name||!t.pet_type||!t.gender||t.age===void 0)throw new Error("Please fill all required fields");await E(n,t)&&(u({title:"Success",description:"Pet updated successfully"}),o(`/pet-details/${n}`))}catch(s){u({title:"Error",description:s.message||"Failed to update pet",variant:"destructive"})}finally{x(!1)}};return w?e.jsx(j,{children:e.jsx("div",{className:"p-6 flex justify-center items-center h-[80vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-petapp-teal"})})}):e.jsx(j,{children:e.jsxs("div",{className:"p-6 pb-24 bg-gray-50",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-[36px] font-bold font-rubik text-black tracking-tight",children:"Edit Pet"}),e.jsx("p",{className:"text-[15px] font-rubik text-gray-400 mt-1",children:"Update your pet's information"})]}),e.jsx("div",{className:"flex flex-col items-center mb-8",children:t.pet_type==="cat"?e.jsx(M,{size:"lg",petType:t.pet_type,gender:t.gender}):e.jsx(V,{size:"lg",petType:t.pet_type,gender:t.gender==="male"?"Male":"Female"})}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsx(c,{label:"Pet Name",name:"name",value:t.name||"",onChange:l,placeholder:"Enter pet's name",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pet Type"}),e.jsxs(v,{value:t.pet_type,onValueChange:a=>g("pet_type",a),disabled:!0,children:[e.jsx(b,{className:"h-12 rounded-lg",children:e.jsx(y,{placeholder:"Select pet type"})}),e.jsx(S,{children:e.jsxs(P,{children:[e.jsx(d,{value:"cat",children:"Cat"}),e.jsx(d,{value:"dog",children:"Dog"})]})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Pet type cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),e.jsxs(v,{value:t.gender,onValueChange:a=>g("gender",a),children:[e.jsx(b,{className:"h-12 rounded-lg",children:e.jsx(y,{placeholder:"Select gender"})}),e.jsx(S,{children:e.jsxs(P,{children:[e.jsx(d,{value:"male",children:"Male"}),e.jsx(d,{value:"female",children:"Female"})]})})]})]}),e.jsx(c,{label:"Age (years)",name:"age",type:"number",value:((f=t.age)==null?void 0:f.toString())||"",onChange:l,placeholder:"Enter pet's age",required:!0,min:0}),e.jsx(c,{label:"Breed (optional)",name:"breed",value:t.breed||"",onChange:l,placeholder:"Enter pet's breed"}),e.jsx(c,{label:"Vaccination Info (optional)",name:"vaccination",value:t.vaccination||"",onChange:l,placeholder:"Enter vaccination information"}),e.jsxs("div",{className:"pt-6 space-y-4",children:[e.jsx(N,{type:"submit",className:"w-full bg-petapp-teal text-white font-bold rounded-lg",disabled:h,children:h?"Saving...":"Save Changes"}),e.jsx(N,{type:"button",variant:"outline",className:"w-full",onClick:()=>o(`/pet-details/${n}`),children:"Cancel"})]})]})]})})};export{B as default};
